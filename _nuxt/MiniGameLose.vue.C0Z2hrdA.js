import{d as N,ah as A,f as c,a6 as H,h as w,g as S,i as x,o as m,c as _,a as n,b as p,l as i,t as C,e as B,J as E,G as I,H as $,u as U,_ as W,M as Z}from"./entry.DIm1cVWt.js";import{_ as P}from"./Preloader.vue.Df9uce2i.js";const D=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.webp"),R=""+globalThis.__publicAssetsURL("images/minigame/alarm_clock.png"),V=D,j={class:"bs-content"},F={class:"bs-content-image is-minigame-alarm-clock"},J=n("picture",null,[n("source",{srcset:V,type:"image/webp"}),n("img",{src:R})],-1),O=["innerHTML"],q=["innerHTML"],z={class:"bs-content-buttons"},Q=["disabled"],X={class:"minigame-button-replay"},Y=["innerHTML"],ee={class:"minigame-button-replay-timer"},te=["innerHTML"],oe=N({__name:"MiniGameLose",setup(ne){const{$event:v}=$(),e=A(),o=c();H();const a=w(!1),K=()=>{c().trackEvent(`minigame_${e.getMiniGameTrackId()}_watch_youtube`)},y=async()=>{e.sceneLoaded&&(a.value||(a.value=!0,await new Promise(t=>setTimeout(t,400)),await e.postStartDailyKeysMiniGame().then(t=>{E().useHapticFeedback("heavy"),e.showGamePage(),e.startGame(),v("bs:close"),c().trackEvent(`minigame_${e.getMiniGameTrackId()}_retry_success`)}).catch(async t=>{I.promise({}).reject({title:$().$i18n.t("messages.oops"),duration:3e3}),c().trackEvent(`minigame_${e.getMiniGameTrackId()}_retry_error`),await U().postConfig()}).finally(()=>{setTimeout(()=>{a.value=!1},400)})))},L=S(()=>{var u,r,M,g,h,f,T,k,G;if(!e.dailyKeysMiniGame||(u=e.dailyKeysMiniGame)!=null&&u.remainSecondsToNextAttempt&&(((r=e.dailyKeysMiniGame)==null?void 0:r.remainSecondsToNextAttempt)<=3&&e.openPage(),((M=e.dailyKeysMiniGame)==null?void 0:M.remainSecondsToNextAttempt)<=0)||!e.dailyKeysMiniGame||(g=e.dailyKeysMiniGame)!=null&&g.remainSecondsToNextAttempt&&((h=e.dailyKeysMiniGame)==null?void 0:h.remainSecondsToNextAttempt)<=0)return"00:00";const t=Math.floor(((f=e.dailyKeysMiniGame)==null?void 0:f.remainSecondsToNextAttempt)%60),s=Math.floor(((T=e.dailyKeysMiniGame)==null?void 0:T.remainSecondsToNextAttempt)/60%60),l=Math.floor(((k=e.dailyKeysMiniGame)==null?void 0:k.remainSecondsToNextAttempt)/(60*60*24)),d=Math.floor(((G=e.dailyKeysMiniGame)==null?void 0:G.remainSecondsToNextAttempt)/(60*60)%24)+l*24;return d>0?`${o.padWithZero(d)}:${o.padWithZero(s)}:${o.padWithZero(t)}`:`${o.padWithZero(s)}:${o.padWithZero(t)}`}),b=S(()=>{var t,s;return e.dailyKeysMiniGame&&((t=e.dailyKeysMiniGame)==null?void 0:t.remainSecondsToNextAttempt)&&((s=e.dailyKeysMiniGame)==null?void 0:s.remainSecondsToNextAttempt)>0});return x(()=>{c().trackEvent(`minigame_${e.getMiniGameTrackId()}_dialog_lose`)}),(t,s)=>{var r;const l=W,d=Z,u=P;return m(),_("div",j,[n("div",F,[p(l,{name:"alarm-clock-glow"}),J]),n("div",{class:"bs-content-title",innerHTML:t.$t("minigame.lose_title")},null,8,O),n("div",{class:"bs-content-description no-gap",innerHTML:t.$t("minigame.lose_description")},null,8,q),n("div",z,[p(d,{class:"bottom-sheet-button button button-primary button-default",to:(r=i(e).dailyKeysMiniGame)==null?void 0:r.youtubeUrl,onClick:K,target:"_blank",innerHTML:t.$t("buttons.watch_youtube_video")},null,8,["to","innerHTML"]),i(b)?(m(),_("button",{key:0,class:"button button-default button-dark",onClick:y,disabled:!i(a)&&i(b)},[n("div",X,[n("p",{innerHTML:t.$t("buttons.retry")},null,8,Y),n("div",ee,[p(l,{class:"is-16",name:"alarm"}),n("p",null,C(i(L)),1)])])],8,Q)):(m(),_("button",{key:1,class:"button button-primary button-default",onClick:y},[!i(a)&&i(e).sceneLoaded?(m(),_("span",{key:0,innerHTML:t.$t("buttons.retry")},null,8,te)):(m(),B(u,{key:1}))]))])])}}});export{oe as _};
